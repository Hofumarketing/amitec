---
import Nav from "./ui/Nav.astro";
import '../assets/styles/index.css';
import Footer from "./ui/Footer.astro";
import Navcommerce from "./ui/navcommerce.astro";
import Navcommerceresults from "./ui/navcommerceresults.astro";

interface Props {
    title?: string | undefined;
}

const { title = undefined } = Astro.props;

const finalTitle = typeof title === 'undefined' ? 'Amitec' : `${title} | Amitec`;

---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide/dist/css/splide.min.css">
        <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide/dist/js/splide.min.js"></script>

        <title>{finalTitle}</title>


    </head>
    <body class="body font-['Objectivity'] overflow-x-hidden">
    <!--<Navcommerce />-->
        <Navcommerceresults />
        <slot />
        <Footer />
    </body>



    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var splide1 = new Splide('#slider', {
                type: 'loop', // Enables looping
                autoplay: true,
                gap: 10,
                perPage: 1, // Number of slides per page
                perMove: 1, // Number of slides moved per arrow click or swipe
                pagination: true, // Disable default pagination dots
                arrows: false, // Disable default arrows
                breakpoints: {
                    768: { // Tablet breakpoint
                        perPage: 3,
                    },
                    480: { // Mobile breakpoint
                        perPage: 1,
                    },
                },
            });

            splide1.mount(); // Mount the slider
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var splide2 = new Splide('#splide2', {
                type: 'loop', // Enables looping
                autoplay: true,
                gap: 10,
                perPage: 3, // Number of slides per page
                perMove: 1, // Number of slides moved per arrow click or swipe
                pagination: false, // Disable default pagination dots
                arrows: false, // Disable default arrows
                breakpoints: {
                    768: { // Tablet breakpoint
                        perPage: 3,
                    },
                    480: { // Mobile breakpoint
                        perPage: 1,
                    },
                },
            });

            splide2.mount();



            document.querySelector('.splide-next').addEventListener('click', function () {
                splide2.go('>');
            });

            // Update progress bar and text
            var progressBar = document.querySelector('.progress-bar__fill');
            var currentSlideText = document.querySelector('.current-slide');
            var totalSlidesText = document.querySelector('.total-slides');

            splide2.on('mounted', function () {
                var totalSlides = splide2.Components.Slides.getLength();
                totalSlidesText.textContent = totalSlides;
                updateProgress();
            });

            splide2.on('move', function () {
                updateProgress();
            });

            function updateProgress() {
                var totalSlides = splide2.Components.Slides.getLength();
                var currentSlide = splide2.index + 1; // index is zero-based
                var progress = ((currentSlide % totalSlides) / 5) * 100;
                progressBar.style.width = progress + '%';
                currentSlideText.textContent = currentSlide;
            }
        });

    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var splide3 = new Splide('#splide3', {
                type: 'loop', // Enables looping
                autoplay: true,
                gap: 30,
                perPage: 2, // Number of slides per page
                perMove: 1, // Number of slides moved per arrow click or swipe
                pagination: false, // Disable default pagination dots
                arrows: false, // Disable default arrows
                breakpoints: {
                    768: { // Tablet breakpoint
                        perPage: 2,
                    },
                    480: { // Mobile breakpoint
                        perPage: 1,
                    },
                },
            });

            splide3.mount(); // Mount the slider

            // Add event listener for custom next button
            var nextButton = document.querySelector('.splide-next2');
            if (nextButton) {
                nextButton.addEventListener('click', function () {
                    splide3.go('>');
                });
            }

            // Update progress bar and text
            var progressBar2 = document.querySelector('.progress-bar__fill2');
            var currentSlideText2 = document.querySelector('.current-slide2');
            var totalSlidesText2 = document.querySelector('.total-slides2');

            splide3.on('mounted', function () {
                updateProgress();
            });

            splide3.on('move', function () {
                updateProgress();
            });

            function updateProgress() {
                var slides = document.querySelectorAll('#splide3 .splide__slide');
                var totalSlides = Array.from(slides).filter(slide => !slide.classList.contains('splide__slide--clone')).length;
                var currentSlide = splide3.index + 1; // index is zero-based
                var progress = (currentSlide / totalSlides) * 100;

                if (progressBar2) {
                    progressBar2.style.width = progress + '%';
                }
                if (currentSlideText2) {
                    currentSlideText2.textContent = currentSlide;
                }
                if (totalSlidesText2) {
                    totalSlidesText2.textContent = totalSlides;
                }
            }
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var splide4 = new Splide('#splide4', {
                type: 'loop', // Enables looping
                autoplay: true,
                gap: 10,
                perPage: 5, // Number of slides per page
                perMove: 1, // Number of slides moved per arrow click or swipe
                pagination: true, // Disable default pagination dots
                arrows: false, // Disable default arrows
                breakpoints: {
                    768: { // Tablet breakpoint
                        perPage: 5,
                    },
                    480: { // Mobile breakpoint
                        perPage: 1,
                    },
                },
            });

            splide4.mount(); // Mount the slider
        });
    </script>